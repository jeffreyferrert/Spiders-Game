!function(){"use strict";!function(){class s{constructor(s){this.x=s.x,this.y=s.y,this.x_move=4,this.radius=10,this.color="brown"}draw=function(s){s.fillStyle=this.color,s.beginPath(),s.arc(this.x,this.y,this.radius,0,2*Math.PI),s.fill()};move(){this.x+=this.x_move}update(){this.x_move=-this.x_move,this.y+=20}}function t(s,t){return 20*Math.floor((Math.random()*(t-s)+s)/20)}function i(s,t,i,e){return Math.sqrt(Math.pow(i-s,2)+Math.pow(e-t,2))}class e{constructor(s){this.x=t(210,700),this.y=10,this.color="brown",this.spiders=[],this.initialize()}initialize(){for(let t=0;t<10;t++){const i=new s({x:this.x-20*t,y:this.y});this.spiders.push(i)}}destroy(s){const t=this.spiders.indexOf(s);this.spiders.splice(t,1)}draw(s){this.spiders.forEach((t=>{(t.x>=700||t.x<0)&&t.update(),t.move(),t.draw(s)}))}}class o{constructor(s){this.x=350,this.y=670,this.color="green",this.bullets=[],this.keyBind()}keyBind(){window.addEventListener("keydown",(s=>{if("ArrowLeft"==s.key||"a"==s.key)this.x-=10;else if("ArrowRight"==s.key||"d"==s.key)this.x+=10;else if("ArrowUp"==s.key||"w"==s.key)this.y-=10;else if("ArrowDown"==s.key||"s"==s.key)this.y+=10;else if(" "==s.key){const s=new class{constructor(s){this.x=s.x,this.y=s.y,this.color="green"}move(){this.y-=10}draw=function(s){s.fillStyle=this.color,s.fillRect(this.x,this.y,10,10)}}({x:this.x,y:this.y});this.bullets.push(s)}}),!0)}destroy(s){const t=this.bullets.indexOf(s);this.bullets.splice(t,1)}draw(s){s.fillStyle=this.color,s.fillRect(this.x,this.y,25,25),this.bullets.forEach((t=>{t.y<=-10?this.bullets.shift():(t.move(),t.draw(s))}))}}class r{constructor(s){this.x=s.x,this.y=s.y,this.color="#003049",this.counter=0}draw=function(s){s.fillStyle=this.color,s.fillRect(this.x,this.y,20,20)}}class h{constructor(s){this.obstacles=[],this.initialize()}initialize(){for(let s=0;s<20;s++){const s=new r({x:t(20,680),y:t(20,640)});this.obstacles.includes(s)||this.obstacles.push(s)}}hit(s,t){switch(s.counter++,s.counter++){case 1:s.color="#fcbf49";break;case 3:s.color="#f77f00";break;case 5:s.color="#d62828";break;case 7:this.destroy(s)}}destroy(s){const t=this.obstacles.indexOf(s);this.obstacles.splice(t,1)}draw(s){this.obstacles.forEach((t=>{t.draw(s)}))}}class c{constructor(s){this.board=new class{constructor(s){this.color="black"}draw(s){s.fillStyle=this.color,s.fillRect(0,0,700,700)}},this.spiders=new e,this.player=new o,this.obstacles=new h}checkCollision(){this.player.bullets.forEach((s=>{this.obstacles.obstacles.forEach((t=>{const[e,o]=[t.x,t.y],[r,h]=[s.x,s.y];i(e,o,r,h)<20&&(this.obstacles.hit(t),this.player.destroy(s))})),this.spiders.spiders.forEach((t=>{const[e,o]=[t.x,t.y],[r,h]=[s.x,s.y];i(e,o,r,h)<20&&(this.spiders.destroy(t),this.player.destroy(s),this.newBlock(e,o))}))})),this.spiders.spiders.forEach((s=>{this.obstacles.obstacles.forEach((t=>{const[i,e]=[t.x,t.y],[o,r]=[s.x,s.y],h=function(s,t,i,e){if(t+10===e){if(s<i)return i-s;if(s>=i)return i-s}}(i,e,o,r);h>0&&h<30?(console.log("derecha"),s.y+=20):h>-10&&h<0&&(console.log("izquierda"),s.y+=20)}))}))}newBlock(s,t){let i=20*Math.floor(s/20),e=20*Math.floor(t/20);const o=new r({x:i,y:e});this.obstacles.obstacles.push(o)}draw(s){s.clearRect(0,0,700,700),this.board.draw(s),this.obstacles.draw(s),this.player.draw(s),this.spiders.draw(s),this.checkCollision(),requestAnimationFrame(this.draw.bind(this,s))}}document.addEventListener("DOMContentLoaded",(function(){const s=document.getElementById("board-canvas").getContext("2d");(new c).draw(s)}))}()}();
//# sourceMappingURL=main.js.map